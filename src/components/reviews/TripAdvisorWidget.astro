---
interface Props {
  locationId: string;
  lang?: string;
}
const { locationId, lang = "es" } = Astro.props;
---
<div class="tripadvisor-widget-container">
  <div class="tripadvisor-header">
    <img class="tripadvisor-logo" src="https://static.tacdn.com/img2/brand_refresh/Tripadvisor_lockup_horizontal_secondary_registered.svg" alt="TripAdvisor" />
  </div>
  <div id={`TA_reviews${locationId}`} class="TA_reviews"></div>
  <script define:vars={{ locationId, lang }}>
    // Usamos define:vars para pasar las variables al script del cliente
    const uniqueId = Math.random();
    const url = `https://www.jscache.com/wejs?wtype=reviews&uniq=${uniqueId}&locationId=${locationId}&lang=${lang}&display_version=2`;
    console.log("Cargando widget de TripAdvisor con:");
    console.log("locationId:", locationId);
    console.log("lang:", lang);
    console.log("URL generada:", url);
    const scriptEl = document.createElement('script');
    scriptEl.async = true;
    scriptEl.src = url;
    scriptEl.setAttribute('data-loadtrk', '');
    scriptEl.onload = () => console.log("Script de TripAdvisor cargado exitosamente");
    document.body.appendChild(scriptEl);
  </script>
</div>
<style>
  .tripadvisor-widget-container {
    max-width: 800px;
    margin: 0 auto;
    border: 1px solid #e5e5e5;
    border-radius: 8px;
    padding: 16px;
    background-color: white;
  }
  
  .tripadvisor-header {
    display: flex;
    justify-content: center;
    margin-bottom: 16px;
    padding-bottom: 16px;
    border-bottom: 1px solid #e5e5e5;
  }
  
  .tripadvisor-logo {
    width: 180px;
  }
  
  .TA_reviews {
    overflow: hidden;
  }
</style>