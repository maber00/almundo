---
interface Props {
  locationId: string;
  lang?: string;
  numberOfReviews?: number;
}

const { 
  locationId, 
  lang = "es", 
  numberOfReviews = 5 
} = Astro.props;
---

<!-- Contenedor del widget de reseÃ±as -->
<div id="TA_reviewsWidget{locationId}" class="TA_reviewsWidget">
  <ul id="I5g4BcNn" class="TA_links vYrEcv">
    <li id="AEMxdXF7" class="ucbZxpOQbH">
      <a target="_blank" href="https://www.tripadvisor.com/Attraction_Review-g1598746-d32812634-Reviews-Al_Mundo_Tours-Tulua_Valle_del_Cauca_Department.html">
        <img src="https://static.tacdn.com/img2/brand_refresh/Tripadvisor_lockup_horizontal_secondary_registered.svg" alt="TripAdvisor" class="widEXCIMG" id="CDSWIDEXCLOGO" />
      </a>
    </li>
  </ul>
</div>

<script define:vars={{ locationId, lang, numberOfReviews }}>
  function loadTripAdvisorWidget() {
    const script = document.createElement('script');
    script.async = true;
    script.src = `https://www.jscache.com/wejs?wtype=reviewsWidget&uniq=${Math.random()}&locationId=${locationId}&lang=${lang}&rating=true&nreviews=${numberOfReviews}&writereviewlink=true&popIdx=true&iswide=false&display_version=2`;
    document.head.appendChild(script);
  }
  
  document.addEventListener('DOMContentLoaded', loadTripAdvisorWidget);
</script>

<style>
  .TA_reviewsWidget {
    width: 100%;
    max-width: 800px;
    margin: 0 auto;
    overflow: hidden;
  }
</style>